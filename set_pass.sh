#!/data/data/com.termux/files/usr/bin/bash

# ==========================================
# Alist å¯†ç ä¿®æ”¹å·¥å…·
# ==========================================

export PATH="$HOME/bin:$PATH"
DATA_DIR="$HOME/alist-data"

if [ -z "$1" ]; then
    echo "----------------------------------------"
    echo "âŒ ç”¨æ³•é”™è¯¯"
    echo "è¯·åœ¨å‘½ä»¤ååŠ ä¸Šæ–°å¯†ç ï¼Œä¾‹å¦‚ï¼š"
    echo "ğŸ‘‰ ./set_pass.sh 123456"
    echo "----------------------------------------"
    exit 1
fi

NEW_PASS="$1"

echo "âš™ï¸ æ­£åœ¨ä¿®æ”¹ Alist å¯†ç ..."
echo "ğŸ“‚ æ•°æ®ç›®å½•: $DATA_DIR"

# å¿…é¡»æŒ‡å®š --data æ‰èƒ½ä¿®æ”¹æ­£ç¡®çš„æ•°æ®åº“
if alist admin set "$NEW_PASS" --data "$DATA_DIR"; then
    echo "----------------------------------------"
    echo "âœ… å¯†ç ä¿®æ”¹æˆåŠŸï¼"
    echo "ğŸ‘¤ ç”¨æˆ·å: admin"
    echo "ğŸ”‘ æ–°å¯†ç : $NEW_PASS"
    echo "----------------------------------------"
    echo "ğŸ’¡ æç¤º: å¦‚æœä»ç„¶æ— æ³•ç™»å½•ï¼Œè¯·å°è¯•æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ã€‚"
else
    echo "âŒ ä¿®æ”¹å¤±è´¥ï¼Œè¯·æ£€æŸ¥ alist æ˜¯å¦æ­£ç¡®å®‰è£…ã€‚"
fi
